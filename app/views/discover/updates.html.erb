<% title "What's happening in #{params[:filter] || 'the community'}" %>
<% provide(:description, "All recent #{params[:filter]} activity across the community built Assembly products.") %>
<% activate_nav! :platform_updates %>

<style> body { background-color: #F4F4F5 } </style>

<%= render 'shared/navbar' %>

<script id="heartables" type="application/json">
  <%== @heartables.to_json %>
</script>

<% if signed_in? %>
  <script id="user_hearts" type="application/json">
    <%== @user_hearts.map{|h| {
        id: h.id,
        heartable_id: h.heartable_id,
      }}.to_json
    %>
  </script>
<% end %>

<%= react_component 'NewsFeed', url: discover_path(action: 'updates', format: 'json'), items: @posts, filterCounts: @counts %>

<%= render 'shared/footer' %>
