<% title 'Notifications' %>

<div class="page">
  <div class="container">
    <div class="row">
      <div class="col-md-5">
        <div class="sheet">
          <div class="sheet-body">
            <div data-react-class="NewsFeed" data-react-props="<%= {
              actors: Hash[ActiveModel::ArraySerializer.new(@users).as_json.map{|u| [u[:id], u]}],
              stories: ActiveModel::ArraySerializer.new(
                @stories, scope: current_user, each_serializer: StorySerializer
              ).as_json
            }.to_json %>">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
$.ajax({
  type: 'GET',
  url: 'http://localhost:3000/readers/<%= current_user.id %>/articles?<%= @stories.map{|s| "key=Story_#{s.id}" }.join('&'.html_safe) %>',
  success: function(data) {
    console.log('success', data)
  }
})
</script>