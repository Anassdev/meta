<% title 'People', @product.name %>
<% activate_nav! :subnav_people %>

<%= render 'shared/navbar' %>
<%= render 'products/navbar' %>

<div class="page">
  <div class="container">
    <% if flash[:joined] %>
      <div class="alert alert-success page-alert">
        Welcome to the <%= @product.name %> team! <a href="<%= product_chat_path(@product) %>">Jump into chat and say Hi</a>
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      </div>
    <% else %>
      <%= render 'products/alert' %>
    <% end %>


    <div class="row">

      <div class="col-xs-8">
        <div class="js-people"></div>
      </div>


      <div class="col-xs-3 col-xs-offset-1">
        <%= render 'products/sidebar' %>
      </div><!-- .col-3 -->

    </div><!-- .row -->
  </div>
</div>

<%= render 'shared/footer' %>

<script>
$(document).ready(function() {

  $('.js-people').each(function(){
    React.renderComponent(People({
      interestFilters: <%== product_membership_interests(@product, false).to_json %>,
      memberships: <%== ActiveModel::ArraySerializer.new(@memberships).to_json %>,
      selected: "<%= @selected_filter %>",
      currentUser: <%== current_user.to_json %>,
      updatePath: "<%= product_person_path(@product, current_user) if current_user %>"
    }), this)
  })
});
</script>
