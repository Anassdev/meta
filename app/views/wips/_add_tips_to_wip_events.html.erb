// add in tips that are rendered server side
var comments = app.wipEvents.filter(function(e) { return e.get('type') == 'Event::Comment' })

_.each(comments, function(e){
  $('.js-insert-tips', $('#' + e.get('anchor'))).each(function() {
    React.render(React.createFactory(TipsUi)({
      viaType: 'Event',
      viaId: e.id,
      recipient: e.get('actor'),
      tips: e.get('tips')
    }), this)
  })
})

var heartablesTag = document.getElementById('heartables')
if (heartablesTag) {
  var heartables = _.reduce(JSON.parse(heartablesTag.innerHTML), function(memo, h){ memo[h.target_id] = h; return memo }, {})

  _.each(comments, function(e){
    $('.js-insert-love', $('#' + e.get('anchor'))).each(function() {
      var heartable = heartables[e.id]
      if (heartable) {
        React.render(React.createFactory(Love)({
          heartable_id: heartables[e.id].heartable_id,
          heartable_type: heartables[e.id].heartable_type
        }), this)
      }
    })
  })
}
